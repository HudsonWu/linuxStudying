# pidstat, 监控并统计linux进程的数据

pidstat命令用来监控被linux内核管理的独立任务(进程), 它输出每个受内核管理的任务的相关信息, 也可以用来监控特定进程的子进程, 间隔的参数用于指定每次报告间的时间间隔, 它的值为0(或者没有参数)说明进程的统计时间从系统启动开始计算

pidstat是sysstat套件的一部分, sysstat包含很多监控linux系统状态的工具
```
apt-get install sysstat
yum install sysstat
```

## 使用

```
pidstat  //等价于pidstat -p, 只有正在活动的任务会显示
```

输出字段
+ PID, 任务进程号
+ %usr, 在用户层(应用程序)执行这个任务的cpu使用率
+ %system, 这个任务在系统层使用时的cpu使用率
+ %guest, 任务花费在虚拟机上的cpu使用率(运行在虚拟处理器)
+ CPU, 正在运行这个任务的处理器编号
+ Command, 这个任务的命令名称

```
pidstat -d -p 8472  //使用-d参数来得到I/O统计数据
```

输出字段
+ `KB_rd/s`, 任务从硬盘上的读取速度(kb)
+ `KB_wr/s`, 任务向硬盘中写入的速度(kb)
+ `KB_ccwr/s`, 任务写入磁盘被取消的速率(kb)

```
pidstat -r -p 1846  //页面失败和内存使用, -r标记你能够得到内存使用情况的数据
```

输出字段
+ minflt/s, 从内存中加载数据时每秒出现的小错误数目, 这些不要求从磁盘载入内存页面
+ majflt/s, 从内存中加载数据时每秒出现的较大错误数目, 这些要求从磁盘载入内存页面
+ VSZ, 虚拟容量, 整个进程的虚拟内存使用(kb)
+ RSS, 长期内存使用, 任务的不可交换物理内存使用量(kb)

## 例子

```
pidstat -r 2 5  //监测内存使用
pidstat -T CHILD -C mysql  //显示所有mysql服务器的子进程
pidstat -urd -h  //将所有统计数据结合到一个便于阅读的单一报告中

```
